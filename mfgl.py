# -*- coding: utf-8 -*-
"""mfgl.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1zWh4QkflINXPe64nyGx7GXOWq4wnzPbV
"""

import streamlit as st


st.title("MATCH FACTOR")
st.markdown("---")
st.markdown("Match Factor merupakan kesesuaian antara unit Loading dengan unit Hauling pada Operasional Penambangan. Tujuannya adalah untuk menentukan Kombinasi alat kerja yang optimal serta memastikan operasional berjalan dengan Produktif dan Aman")
st.markdown("Seringkali terjadi di lapangan, Jumlah unit Hauling yang sudah tersetting namun masih terjadi waktu tunggu atau antrian pada unit hauling, sehingga harus terus di monitor secara periodik 2-3 jam untuk meminimalkan waktu tunggu ataupun antrian")
st.markdown("Pada kesempatan ini, diberikan parameter untuk memonitoring secara periodik di lapangan secara langsung, dengan Settingan unit Loading dapat di sesuaikan sesuai EGI sebagai berikut, PC850, PC1250SP8, PC1250SP11R, PC2000SP8, PC200011R. Sedangankan untuk unit Hauling hanya untuk EGI HD785")


# Parameter MF
JumlahHD = st.number_input("Masukkan Jumlah HD785 (Jumlah):")
Spoting = st.number_input("Masukkan Waktu Spotting Time (Detik):")
CTPC = st.number_input("Masukkan Waktu Cycle Time PC (Detik):")
Passing = st.number_input("Masukkan Jumlah Passing PC (Jumlah):")
CTHD = st.number_input("Masukkan Cycle Time HD (Dari keluar front sampai memasuki front kembali)(Menit):")
Jarak = st.number_input("Masukkan Jarak Front ke Disposal (KM):")

# Validasi jarak tidak boleh nol
if Jarak <= 0:
    st.error("Jarak tidak boleh nol!")
    Jarak = st.number_input("Masukkan Jarak Front ke Disposal (KM): ")

# Konversi Parameter
Spoting1 = Spoting / 60
LoadingTime = (CTPC * Passing) / 60
WaktuCycle = (CTHD+Spoting1+LoadingTime)

# Formula MF
hasil = (JumlahHD * (LoadingTime + Spoting1)) / (WaktuCycle)

st.markdown(f"Hasil Match Factor adalah {hasil:.2f}")

# Memeriksa Hasil MF
if 0.95 <= hasil <= 1:
    st.success("MF Good, Pertahankan Parameter! :)")
elif hasil < 0.95:
    # Menentukan jumlah HD yang dibutuhkan untuk mencapai hasil minimum 0.96
    jumlah_hd_rekomendasi = (0.96 * WaktuCycle) / (LoadingTime + Spoting1)
    st.warning(f"Rekomendasi: Tingkatkan Jumlah HD785 menjadi minimal {jumlah_hd_rekomendasi:.2f} HD")
else:
    # Menentukan kecepatan HD yang dibutuhkan untuk mencapai hasil maksimum 1
    speed_rekomendasi = (JumlahHD * (LoadingTime + Spoting1)) / (WaktuCycle - JumlahHD)
    st.warning(f"Rekomendasi: Kurangi Kecepatan HD785 menjadi maksimal {speed_rekomendasi:.2f} KM/Jam")

CthdJam = CTHD/60
speed = Jarak/(CthdJam/2)
st.markdown(f"Speed rata-rata diperoleh {speed:.2f}")